{"code":"$.ajax({async:!0,crossDomain:!0,url:\"http://34.67.197.111:8000/statements\",method:\"GET\",headers:{authorization:\"Basic cm1pX3VzZXI6cm1pMzIxIUAj\",\"content-type\":\"application/json\",\"cache-control\":\"no-cache\",\"postman-token\":\"648dcbfa-30ef-3359-f29a-31b2038f29ac\"},processData:!1,success:function(t){var e,a=JSON.parse(t);for(e=0;e<a.length;e++){var r=a;$(\"#dtBasicExample tr:last\").after('<tr style=\"color:black\"><td> '+r[e].id+'</td> <td style=\"color:black\"><a href=\"#/FinancialModel?companyname='+r[e].company+'&scenario=1\" style=\"color:black;\">'+r[e].company+\"</a></td> <td> \"+r[e].period+\"</td> <td> \"+r[e].username+\" </td> <td> \"+r[e].created_at+\" </td><td> \"+r[e].filename+\"</td>  </tr>\")}}});var formatter=new Intl.NumberFormat(\"en-US\",{style:\"currency\",currency:\"USD\",minimumFractionDigits:0});try{var companyName=window.location.href.split(\"=\")[1]}catch(error){console.log(error)}$(\"#actualsId\").attr(\"href\",\"/actual?CompanyName=\"+companyName),$(\"#financialId\").attr(\"href\",\"/FinancialModel?CompanyName=\"+companyName+\"&senario=1\"),$(\"#pdfId\").attr(\"href\",\"/pdf?CompanyName=\"+companyName);var actualObj=new Map,rojectionObj=new Map,actualXAxis=[],yearsArray=[],previousAmount=0,totalRevenue=[];function loadActuals(){$.ajax({async:!0,crossDomain:!0,url:\"http://34.67.197.111:8000/actuals?company=\"+companyName,method:\"GET\",headers:{authorization:\"Basic cm1pX3VzZXI6cm1pMzIxIUAj\",\"content-type\":\"application/json\",\"cache-control\":\"no-cache\",\"postman-token\":\"648dcbfa-30ef-3359-f29a-31b2038f29ac\"},processData:!1}).done(function(t){let e=JSON.parse(t);for(let a=0;a<e.length;a++)0===e[a].latest&&(previousAmount=e[a].totalrevenue),actualObj.set(e[a].asof,{totalRevenue:e[a].totalrevenue,p_GrossProfit:e[a].grossprofit,p_EBIT:e[a].ebit,p_EBITDA:e[a].ebitda,p_EBT:e[a].ebt,p_NetInCome:e[a].netincome,latest:e[a].latest,p_COGS:e[a].cogs,p_SGAndA:e[a].sga,p_Ebitmargin:e[a].ebitmargin,p_Ebitdamargin:e[a].ebitdamargin,p_DAndA:e[a].da,p_GrossProfitMargin:e[a].grossprofitmargin,p_taxes:e[a].taxes,p_NetInCome:e[a].netincome,p_NetIM:e[a].netincomemargin,p_NIE:e[a].netinterest,p_OIOrE:e[a].otherincome,p_EBTmargin:e[a].ebtmargin}),yearsArray.push(e[a].asof);console.log(actualObj)})}function updateProjectionPdf(){let t=$(\"#sel2\").val();yearsArray=[],actualObj.clear(),loadData(t)}function loadData(t){loadActuals(),$.ajax({async:!0,crossDomain:!0,url:\"http://34.67.197.111:8000/projections?company=\"+companyName+\"&scenario=\"+t,method:\"GET\",headers:{authorization:\"Basic cm1pX3VzZXI6cm1pMzIxIUAj\",\"content-type\":\"application/json\",\"cache-control\":\"no-cache\",\"postman-token\":\"648dcbfa-30ef-3359-f29a-31b2038f29ac\"},processData:!0}).done(function(t){resObject=JSON.parse(t);let e=0;for(let a=0;a<resObject.length;a++)e=0==a?Math.round(previousAmount+previousAmount*(resObject[a].revenuepercent/100)):Math.round(resObject[a-1].totalRevenue+resObject[a-1].totalRevenue*(resObject[a].revenuepercent/100)),actualObj.set(resObject[a].asof,{totalRevenue:e,revenueGrowth:resObject[a].revenuepercent,COGS:resObject[a].cogspercent,SGAndA:resObject[a].sgapercent,DAndA:resObject[a].dapercent,netIterestExpense:resObject[a].netinterestdollars,otherIncomeOrExpense:resObject[a].otherincomepercent,taxes:resObject[a].taxespercent,latest:resObject[a].latest,p_GrossProfitMargin:resObject[a].grossprofitmargin,p_Ebitmargin:resObject[a].ebitmargin,p_Ebitdamargin:resObject[a].ebitdamargin,p_NetIM:resObject[a].netincomemargin,p_EBTmargin:resObject[a].ebtmargin,p_OIOrE:resObject[a].otherincome}),yearsArray.push(resObject[a].asof);updateProjection(actualObj),appendTotable(),console.log(\"Actual OBJ:\",actualObj)})}function updateProjection(t){console.log(t);let e=0;for(let[a,r]of t)void 0!==t.get(a).COGS&&(t.get(a).totalRevenue=Math.round(t.get(e).totalRevenue+t.get(e).totalRevenue*(t.get(a).revenueGrowth/100)),t.get(a).p_COGS=Math.round(t.get(a).totalRevenue*(t.get(a).COGS/100)),t.get(a).p_GrossProfit=Math.round(t.get(a).totalRevenue-t.get(a).p_COGS),t.get(a).p_SGAndA=Math.round(t.get(a).totalRevenue*(t.get(a).SGAndA/100)),t.get(a).p_EBIT=Math.round(t.get(a).p_GrossProfit-t.get(a).p_SGAndA),t.get(a).p_DAndA=Math.round(t.get(a).totalRevenue*(t.get(a).DAndA/100)),t.get(a).p_EBITDA=Math.round(t.get(a).p_EBIT+t.get(a).p_DAndA),t.get(a).p_NIE=t.get(a).netIterestExpense,t.get(a).p_OIOrE=Math.round(t.get(a).totalRevenue*(t.get(a).otherIncomeOrExpense/100)),t.get(a).p_EBT=Math.round(t.get(a).p_EBIT-t.get(a).p_NIE-t.get(a).p_OIOrE),t.get(a).p_taxes=Math.round(t.get(a).p_EBT*(t.get(a).taxes/100)),t.get(a).p_NetInCome=t.get(a).p_EBT-t.get(a).p_taxes,t.get(a).p_GrossProfitMargin=t.get(a).p_GrossProfitMargin,t.get(a).p_Ebitmargin=t.get(a).p_Ebitmargin,t.get(a).p_Ebitdamargin=t.get(a).p_Ebitdamargin,t.get(a).p_NetIM=t.get(a).p_NetIM),e=a}function appendTotable(){$(\"#myTable\").find(\"tr:gt(0)\").remove(),console.log(\"yearsarray\",yearsArray);var t=\"<td>&nbsp</td>\";for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"font-weight:bold;text-align:center\">'+yearsArray[e]+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"font-weight:bold;text-align:left;padding-left:5px;\">Total Revenue</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right;padding-right:5px;font-weight:bold\">'+formatter.format(actualObj.get(yearsArray[e]).totalRevenue)+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"text-align:left;padding-left:5px;\">(-) Cost of Goods Sold (COGS)</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right; padding-right:5px\">'+formatter.format(actualObj.get(yearsArray[e]).p_COGS)+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"font-weight:bold;text-align:left;padding-left:5px;\">Gross Profit</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"padding-right:5px; text-align:right ;font-weight:bold\">'+formatter.format(actualObj.get(yearsArray[e]).p_GrossProfit)+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"font-style: italic;text-align:left;padding-left:5px;\">Gross Profit Margin</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"font-style: italic;text-align:right;padding-right:5px\">'+actualObj.get(yearsArray[e]).p_GrossProfitMargin+\"%</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"text-align:left;padding-left:5px;\">(-) Selling, General & Administrative Expense (SG&A)</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\" text-align:right;padding-right:5px\">'+formatter.format(actualObj.get(yearsArray[e]).p_SGAndA)+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"font-weight:bold;text-align:left;padding-left:5px;\">EBIT</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right; padding-right:5px;font-weight:bold\">'+formatter.format(actualObj.get(yearsArray[e]).p_EBIT)+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"font-style: italic;text-align:left;padding-left:5px;\">EBIT Margin</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"font-style: italic;text-align:right ;padding-right:5px\">'+actualObj.get(yearsArray[e]).p_Ebitmargin+\"%</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"text-align:left;padding-left:5px;\">(+) Depreciation & Amortization (D&A)</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right; padding-right:5px\">'+formatter.format(actualObj.get(yearsArray[e]).p_DAndA)+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"font-weight:bold;text-align:left;padding-left:5px;\">EBITDA</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right; padding-right:5px;font-weight:bold\">'+formatter.format(actualObj.get(yearsArray[e]).p_EBITDA)+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"font-style: italic;text-align:left;padding-left:5px;\">EBITDA Margin</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right; font-style:italic;padding-right:5px\">'+actualObj.get(yearsArray[e]).p_Ebitdamargin+\"%</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"text-align:left;padding-left:5px;\">EBIT</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right; padding-right:5px\">'+formatter.format(actualObj.get(yearsArray[e]).p_EBIT)+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"text-align:left;padding-left:5px;\">(-) Net Interest Expense</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right; padding-right:5px\">'+formatter.format(actualObj.get(yearsArray[e]).p_NIE)+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"text-align:left;padding-left:5px\">(+/-) Other Income/Expense</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right; padding-right:5px\">'+formatter.format(actualObj.get(yearsArray[e]).p_OIOrE)+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"font-weight:bold;text-align:left;padding-left:5px;\">EBT</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right;padding-right:5px;font-weight:bold\">'+formatter.format(actualObj.get(yearsArray[e]).p_EBT)+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"font-style:italic;text-align:left;padding-left:5px\">EBT Margin</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right; font-style:italic;padding-right:5px\">'+actualObj.get(yearsArray[e]).p_EBTmargin+\"%</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"text-align:left;padding-left:5px;\">(-)Taxes</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right; padding-right:5px\">'+formatter.format(actualObj.get(yearsArray[e]).p_taxes)+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"font-weight:bold;text-align:left;padding-left:5px;\">Net Income</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right; padding-right:5px;font-weight:bold\">'+formatter.format(actualObj.get(yearsArray[e]).p_NetInCome)+\"</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\"),t='<td style=\"font-style: italic;text-align:left;padding-left:5px;\">Net Income Margin</td>';for(let e=0;e<yearsArray.length;e++)t=t+'<td style=\"text-align:right; font-style: italic;padding-right:5px\">'+actualObj.get(yearsArray[e]).p_NetIM+\"%</td>\";$(\"#myTable tr:last\").after(\"<tr>\"+t+\"</tr>\")}function importupload(t){t.preventDefault();var e=document.getElementById(\"inputfilenow\").files[0],a=document.getElementById(\"company\").value,r=document.getElementById(\"period\").value,n=document.getElementById(\"statementtype\").value,l=document.getElementById(\"industry\").value,o=new FormData;return o.append(\"file\",e),o.append(\"company\",a),o.append(\"period\",r),o.append(\"statementtype\",n),o.append(\"industry\",l),console.log(\"data\",o),$.ajax({type:\"POST\",enctype:\"multipart/form-data\",processData:!1,contentType:!1,url:\"/upload\",data:o,success:function(t){console.log(\"success\"),console.log(JSON.stringify(t)),alert(\"File Uploded Successfully\")},error:function(t){alert(\"Failed Some Field are Missing\")}}),!1}function upload(t){t.preventDefault();var e=document.getElementById(\"username\").value,a=document.getElementById(\"password\").value;return JSON.stringify({username:e,password:a}),console.log(`username is ${e} password is ${a}`),$.post(\"/login\",{username:e,password:a},function(t,e){\"SUCCESS\"==t.status&&(window.location=\"#/statement\")}),!1}","extractedComments":[]}